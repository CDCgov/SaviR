<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute Percent-change in Cases Over a Specified Window — calc_window_pct_change • SaviR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Percent-change in Cases Over a Specified Window — calc_window_pct_change"><meta name="description" content="Given a time series of new cases over a certain date range, compute a windowed percent change
value of cases (i.e. one week versus previous 7 days, etc.).
The window is right-aligned by the date column (beginning the most recent date shifting backwards).
Note that because we're computing based on index rather than calendar time, results will be erroneous
if data are not complete for every date.
For type == &quot;cases&quot;, data should contain at least &quot;date&quot; and &quot;new_cases&quot; columns.
For type == &quot;deaths&quot;, data should contain at least &quot;date&quot; and &quot;new_deaths&quot; columns."><meta property="og:description" content="Given a time series of new cases over a certain date range, compute a windowed percent change
value of cases (i.e. one week versus previous 7 days, etc.).
The window is right-aligned by the date column (beginning the most recent date shifting backwards).
Note that because we're computing based on index rather than calendar time, results will be erroneous
if data are not complete for every date.
For type == &quot;cases&quot;, data should contain at least &quot;date&quot; and &quot;new_cases&quot; columns.
For type == &quot;deaths&quot;, data should contain at least &quot;date&quot; and &quot;new_deaths&quot; columns."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SaviR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/prod_sitrep.html">COVID Visualizations (COVIS)</a></li>
    <li><a class="dropdown-item" href="../articles/routine_report_start_chunk.html">Routine Report Starting Chunk</a></li>
    <li><a class="dropdown-item" href="../articles/savir_version_0.2_api_changes.html">SaviR Version 0.2 API Changes</a></li>
    <li><a class="dropdown-item" href="../articles/testing_demo.html">Dynamic data source selection for testing data</a></li>
    <li><a class="dropdown-item" href="../articles/testing_investigation.html">Testing Data Investigation</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CDCgov/SaviR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute Percent-change in Cases Over a Specified Window</h1>
      <small class="dont-index">Source: <a href="https://github.com/CDCgov/SaviR/blob/master/R/helpers.R" class="external-link"><code>R/helpers.R</code></a></small>
      <div class="d-none name"><code>calc_window_pct_change.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a time series of new cases over a certain date range, compute a windowed percent change
value of cases (i.e. one week versus previous 7 days, etc.).</p>
<p>The window is right-aligned by the date column (beginning the most recent date shifting backwards).</p>
<p>Note that because we're computing based on index rather than calendar time, results will be erroneous
if data are not complete for every date.</p>
<p>For <code>type</code> == "cases", data should contain at least "date" and "new_cases" columns.
For <code>type</code> == "deaths", data should contain at least "date" and "new_deaths" columns.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_window_pct_change</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cases"</span>, <span class="st">"deaths"</span><span class="op">)</span>,</span>
<span>  window <span class="op">=</span> <span class="fl">14L</span>,</span>
<span>  return_totals <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data.frame with required columns to compute the metric</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>(character) one of cases or deaths, specifying the appropriate basis for the metric</p></dd>


<dt id="arg-window">window<a class="anchor" aria-label="anchor" href="#arg-window"></a></dt>
<dd><p>(numeric, default: 14) a numeric representing days to calculate the metric over</p></dd>


<dt id="arg-return-totals">return_totals<a class="anchor" aria-label="anchor" href="#arg-return-totals"></a></dt>
<dd><p>(default: FALSE) return running sums used to compute <code>pct_change</code>?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a df summarized by date with new column <code>pct_change</code>, or pct_change, cases_current, cases_prev if <code>return_totals</code> is <code>TRUE</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_covid_df.html">get_covid_df</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">calc_window_pct_change</span><span class="op">(</span>window <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># For grouped operations, group data beforehand and pipe:</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">iso2code</span>, <span class="va">country</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">calc_window_pct_change</span><span class="op">(</span>window <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Browning, Kimberly Lockwood, Nartlada Chantharojwong, James Fuller, Randy Yee.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

