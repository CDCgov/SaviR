<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="SaviR">
<title>SaviR Version 0.2 API Changes • SaviR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SaviR Version 0.2 API Changes">
<meta property="og:description" content="SaviR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SaviR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/prod_sitrep.html">COVID Visualizations (COVIS)</a>
    <a class="dropdown-item" href="../articles/routine_report_start_chunk.html">Routine Report Starting Chunk</a>
    <a class="dropdown-item" href="../articles/savir_version_0.2_api_changes.html">SaviR Version 0.2 API Changes</a>
    <a class="dropdown-item" href="../articles/testing_demo.html">Dynamic data source selection for testing data</a>
    <a class="dropdown-item" href="../articles/testing_investigation.html">Testing Data Investigation</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CDCgov/SaviR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>SaviR Version 0.2 API Changes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CDCgov/SaviR/blob/HEAD/vignettes/savir_version_0.2_api_changes.Rmd" class="external-link"><code>vignettes/savir_version_0.2_api_changes.Rmd</code></a></small>
      <div class="d-none name"><code>savir_version_0.2_api_changes.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>SaviR version 0.2 brings some major revisions to the SaviR API
design; some complementary and some breaking. I’ll highlight a few of
them below.</p>
</div>
<div class="section level2">
<h2 id="standardization-of-geography-columns-across-datasets">Standardization of geography columns across datasets<a class="anchor" aria-label="anchor" href="#standardization-of-geography-columns-across-datasets"></a>
</h2>
<div class="section level3">
<h3 id="black-box-warning">Black box warning<a class="anchor" aria-label="anchor" href="#black-box-warning"></a>
</h3>
<p><strong>This will have a pretty substantial impact on all products,
and will likely break most existing downstream code…</strong></p>
</div>
<div class="section level3">
<h3 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h3>
<p>All data pull functions use different naming schemes for ISO country
codes and country names. It’s never apparent which column to join on,
and after joining, it’s very difficult to reason what came from where.
I’m attempting to standardize all ISO code columns to either iso2code or
id (iso3code) depending on their value.</p>
<p>There should be no guesswork involved when joining disparate datasets
(it’s always id or iso2code, and they should join without specifying a
<code>by</code> argument).</p>
</div>
<div class="section level3">
<h3 id="impact">Impact<a class="anchor" aria-label="anchor" href="#impact"></a>
</h3>
<div class="section level5">
<h5 id="owid_testing_meta-get_owid_testing_meta">owid_testing_meta, get_owid_testing_meta()<a class="anchor" aria-label="anchor" href="#owid_testing_meta-get_owid_testing_meta"></a>
</h5>
<ul>
<li>
<code>iso_code</code> -&gt; <code>id</code>
</li>
</ul>
</div>
<div class="section level5">
<h5 id="get_testing-and-all-inner-functions">get_testing() (and all inner functions)<a class="anchor" aria-label="anchor" href="#get_testing-and-all-inner-functions"></a>
</h5>
<ul>
<li>
<code>iso_code</code> -&gt; id</li>
</ul>
</div>
<div class="section level5">
<h5 id="get_covid_df">get_covid_df()<a class="anchor" aria-label="anchor" href="#get_covid_df"></a>
</h5>
<ul>
<li>
<code>country_code</code> -&gt; <code>iso2code</code>
</li>
<li>Removing <code>who_region</code>, <code>region</code>
<ul>
<li>These are both provided in <code>onetable</code>, and
<code><a href="../reference/get_covid_df.html">get_covid_df()</a></code> is never used without joining to this
metadata table</li>
</ul>
</li>
</ul>
</div>
<div class="section level5">
<h5 id="get_vax-get_vax_manufacturers">get_vax(), get_vax_manufacturers()<a class="anchor" aria-label="anchor" href="#get_vax-get_vax_manufacturers"></a>
</h5>
<ul>
<li>
<code>iso_code</code> -&gt; <code>id</code>
</li>
<li>
<code>location</code> -&gt; <code>owid_country</code>
<ul>
<li>Still not ideal, but it should be apparent where that column comes
from</li>
</ul>
</li>
<li>URL for <code><a href="../reference/get_vax_manufacturers.html">get_vax_manufacturers()</a></code> changed</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">onetable</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 237 × 10</span></span></span>
<span><span class="co">#&gt;    id    iso2code state_region            who_region who_region_desc who_country</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ABW   AW       <span style="color: #BB0000;">NA</span>                      AMRO       Americas        Aruba      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> AFG   AF       South and Central Asia  EMRO       Eastern Medite… Afghanistan</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> AGO   AO       Sub-Saharan Africa      AFRO       Africa          Angola     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> AIA   AI       <span style="color: #BB0000;">NA</span>                      AMRO       Americas        Anguilla   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ALB   AL       Europe and Eurasia      EURO       Europe          Albania    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> AND   AD       Europe and Eurasia      EURO       Europe          Andorra    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ARE   AE       Near East (Middle East… EMRO       Eastern Medite… United Ara…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ARG   AR       Western Hemisphere      AMRO       Americas        Argentina  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ARM   AM       Europe and Eurasia      EURO       Europe          Armenia    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ASM   AS       <span style="color: #BB0000;">NA</span>                      WPRO       Western Pacific American S…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 227 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: incomelevel_value &lt;chr&gt;, population &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   eighteenplus &lt;dbl&gt;, geometry &lt;MULTIPOLYGON [m]&gt;</span></span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_covid_df.html">get_covid_df</a></span><span class="op">(</span><span class="st">"WHO"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   date       iso2code country              new_cases cumulative_cases new_deaths</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2020-01-03 AD       Andorra                      0                0          0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2020-01-03 AE       United Arab Emirates         0                0          0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2020-01-03 AF       Afghanistan                  0                0          0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2020-01-03 AG       Antigua and Barbuda          0                0          0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2020-01-03 AI       Anguilla                     0                0          0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2020-01-03 AL       Albania                      0                0          0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: cumulative_deaths &lt;int&gt;, source &lt;chr&gt;</span></span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/get_vax.html">get_vax</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 17</span></span></span>
<span><span class="co">#&gt;   owid_country id    date       total_vaccinations people_vaccinated</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Aruba        ABW   2021-03-29              <span style="text-decoration: underline;">25</span>766             <span style="text-decoration: underline;">15</span>600</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Aruba        ABW   2021-03-30              <span style="text-decoration: underline;">25</span>766             <span style="text-decoration: underline;">15</span>600</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Aruba        ABW   2021-03-31              <span style="text-decoration: underline;">25</span>766             <span style="text-decoration: underline;">15</span>600</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Aruba        ABW   2021-04-01              <span style="text-decoration: underline;">25</span>766             <span style="text-decoration: underline;">15</span>600</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Aruba        ABW   2021-04-02              <span style="text-decoration: underline;">25</span>766             <span style="text-decoration: underline;">15</span>600</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Aruba        ABW   2021-04-03              <span style="text-decoration: underline;">25</span>766             <span style="text-decoration: underline;">15</span>600</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 12 more variables: people_fully_vaccinated &lt;dbl&gt;, total_boosters &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   daily_vaccinations_raw &lt;int&gt;, daily_vaccinations &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   total_vaccinations_per_hundred &lt;dbl&gt;, people_vaccinated_per_hundred &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   people_fully_vaccinated_per_hundred &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   total_boosters_per_hundred &lt;dbl&gt;, daily_vaccinations_per_million &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   daily_people_vaccinated &lt;int&gt;, daily_people_vaccinated_per_hundred &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   daily_vaccinations_per_hundred &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="new-starting-block-function-get_combined_table">New “Starting Block” function <code>get_combined_table()</code><a class="anchor" aria-label="anchor" href="#new-starting-block-function-get_combined_table"></a>
</h2>
<p>Many scripts accomplished this task differently, and it was never
clear to most exactly how to pull and join these data together.</p>
<p>No one is forced to use it, but there is now an automated way to:</p>
<ul>
<li>Pull metadata, case + death data, and vaccine data</li>
<li>Join all together</li>
<li>Filter to only WHO source, or WHO + JHU source</li>
<li>Keep (or remove) geometry column for mapping</li>
</ul>
<p><code><a href="../reference/get_combined_table.html">get_combined_table()</a></code> takes two arguments:</p>
<ul>
<li>type: one of “WHO” or “Both”, based on which source you’d like</li>
<li>geometry: TRUE/FALSE (default:TRUE) based on whether you’d like
geometry or not.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">who_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_combined_table.html">get_combined_table</a></span><span class="op">(</span><span class="st">"WHO"</span><span class="op">)</span></span>
<span><span class="co"># is identical to the following sequence:</span></span>
<span><span class="co"># (which still works, but is unnecessary)</span></span>
<span><span class="co"># onetable %&gt;%</span></span>
<span><span class="co">#   select(-geometry) %&gt;% # In the case that geometry = FALSE</span></span>
<span><span class="co">#   right_join(get_covid_df(), by = "iso2code") %&gt;%</span></span>
<span><span class="co">#   filter(source == "WHO") %&gt;% # In the case of type = "WHO"</span></span>
<span><span class="co">#   # filter(!(country == "China" &amp; source == "WHO")) %&gt;% # In the case of type = "Both"</span></span>
<span><span class="co">#   calc_add_risk() %&gt;%</span></span>
<span><span class="co">#   left_join(get_vax(), by = c("id", "date"))</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">who_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 56</span></span></span>
<span><span class="co">#&gt;   id    iso2code state_region who_region who_region_desc who_country</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ABW   AW       <span style="color: #BB0000;">NA</span>           AMRO       Americas        Aruba      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ABW   AW       <span style="color: #BB0000;">NA</span>           AMRO       Americas        Aruba      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ABW   AW       <span style="color: #BB0000;">NA</span>           AMRO       Americas        Aruba      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ABW   AW       <span style="color: #BB0000;">NA</span>           AMRO       Americas        Aruba      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ABW   AW       <span style="color: #BB0000;">NA</span>           AMRO       Americas        Aruba      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ABW   AW       <span style="color: #BB0000;">NA</span>           AMRO       Americas        Aruba      </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 50 more variables: incomelevel_value &lt;chr&gt;, population &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   eighteenplus &lt;dbl&gt;, date &lt;date&gt;, country &lt;chr&gt;, new_cases &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cumulative_cases &lt;int&gt;, new_deaths &lt;int&gt;, cumulative_deaths &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   source &lt;chr&gt;, new_cases_copy &lt;dbl&gt;, new_deaths_copy &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cumulative_cases_copy &lt;dbl&gt;, cumulative_deaths_copy &lt;dbl&gt;, weekdate &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   new_cases_7dav &lt;dbl&gt;, new_deaths_7dav &lt;dbl&gt;, daily_case_incidence &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   daily_death_incidence &lt;dbl&gt;, week_case &lt;dbl&gt;, prev_week_case &lt;dbl&gt;, …</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="vaccine-carry-forward">Vaccine carry-forward<a class="anchor" aria-label="anchor" href="#vaccine-carry-forward"></a>
</h2>
<p>We were running into issues where vaccination data were sometimes
carried forward, but not always.</p>
<p>Since this is generally the behavior we want, I’ve applied it within
SaviR using a new function, <code><a href="../reference/calc_vax_carryforward.html">calc_vax_carryforward()</a></code></p>
<div class="section level3">
<h3 id="calc_vax_carryforward">
<code>calc_vax_carryforward()</code><a class="anchor" aria-label="anchor" href="#calc_vax_carryforward"></a>
</h3>
<p>This function is used internally in <code><a href="../reference/get_vax.html">get_vax()</a></code> and
<code><a href="../reference/get_combined_table.html">get_combined_table()</a></code> to carry-forward the following
columns:</p>
<ul>
<li><code>total_vaccinations</code></li>
<li><code>people_vaccinated</code></li>
<li><code>people_fully_vaccinated</code></li>
<li><code>total_boosters</code></li>
<li><code>total_vaccinations_per_hundred</code></li>
<li><code>people_vaccinated_per_hundred</code></li>
<li><code>people_fully_vaccinated_per_hundred</code></li>
<li><code>total_boosters_per_hundred</code></li>
</ul>
<p>Passing columns to <code>calc_vax_carryforward</code> overrides that
behavior, but there isn’t presently a need for that.</p>
</div>
<div class="section level3">
<h3 id="get_vax_dates">
<code>get_vax_dates()</code><a class="anchor" aria-label="anchor" href="#get_vax_dates"></a>
</h3>
<p>Because vaccine data are carried-forward, the old way of computing
the date the vaccine data were last updated is no longer possible.
Instead, I’ve created a function which computes those dates
automatically, <code><a href="../reference/get_vax_dates.html">get_vax_dates()</a></code></p>
<p><code><a href="../reference/get_vax_dates.html">get_vax_dates()</a></code> takes no arguments, but returns a data
frame with 1 row per country detailing when each vaccine metric was last
updated.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vax_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_vax_dates.html">get_vax_dates</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">vax_dates</span><span class="op">)</span></span>
<span><span class="co">#&gt;    owid_country  id total_doses_date partial_date fully_date booster_date</span></span>
<span><span class="co">#&gt; 1:  Afghanistan AFG       2023-07-11   2023-07-11 2023-07-11   2023-07-11</span></span>
<span><span class="co">#&gt; 2:      Albania ALB       2023-05-14   2023-05-14 2023-05-14   2023-05-14</span></span>
<span><span class="co">#&gt; 3:      Algeria DZA       2022-09-04   2022-09-04 2022-09-04   2022-09-04</span></span>
<span><span class="co">#&gt; 4:      Andorra AND       2023-05-21   2023-05-21 2023-05-21   2023-05-21</span></span>
<span><span class="co">#&gt; 5:       Angola AGO       2023-06-18   2023-06-18 2023-06-18   2023-06-18</span></span>
<span><span class="co">#&gt; 6:     Anguilla AIA       2023-03-10   2023-03-17 2023-03-17   2023-03-03</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Sean Browning, Kimberly Lockwood, Nartlada Chantharojwong, James Fuller, Randy Yee.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
